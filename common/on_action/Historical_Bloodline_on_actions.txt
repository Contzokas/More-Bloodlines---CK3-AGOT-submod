on_birth_child = {
	on_actions = {
		all_descendants_actions
		ck2_version_actions
		ck2_realfather_version_actions
		dynasty_bloodline_actions
	}
}



#通用继承型
all_descendants_actions ={
	trigger = { 
		has_game_rule = all_descendants
		any_parent ={
			OR = {
				any_character_trait = { has_trait_flag = male_character_bloodline }
				any_character_trait = { has_trait_flag = female_character_bloodline }
			}
		}
	}

	effect = {
		real_father ={
			every_character_trait ={
				limit = { has_trait_flag = male_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}
		mother ={
			every_character_trait ={
				limit = { has_trait_flag = female_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}

	}
}



#名誉父亲继承型
ck2_version_actions ={
	trigger = { 
		has_game_rule = ck2_version
		any_parent ={
			OR = {
				any_character_trait = { has_trait_flag = male_character_bloodline }
				any_character_trait = { has_trait_flag = female_character_bloodline }
			}
		}
	}

	effect = {
  
		#父系继承
		father ={
			every_character_trait ={
				limit = { has_trait_flag = male_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}
		#母系继承
		mother ={
			every_character_trait ={
				limit = { has_trait_flag = female_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}
		#入赘继承
		every_parent ={
			limit = { matrilinear_marriage = yes }
			every_character_trait ={
				limit = { has_trait_flag = male_character_bloodline }
				ROOT = { add_trait = prev }
			}
			every_character_trait ={
				limit = { has_trait_flag = female_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}

	}
}



#生父继承型
ck2_realfather_version_actions ={
	trigger = { 
		has_game_rule = ck2_realfather_version
		any_parent ={
			OR = {
				any_character_trait = { has_trait_flag = male_character_bloodline }
				any_character_trait = { has_trait_flag = female_character_bloodline }
			}
		}
	}

	effect = {
  
		#父系继承
		real_father ={
			every_character_trait ={
				limit = { has_trait_flag = male_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}
		#母系继承
		mother ={
			every_character_trait ={
				limit = { has_trait_flag = female_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}
		#入赘继承
		real_father ={
			limit = { matrilinear_marriage = yes }
			every_character_trait ={
				limit = { has_trait_flag = male_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}
		mother ={
			limit = { matrilinear_marriage = yes }
			every_character_trait ={
				limit = { has_trait_flag = male_character_bloodline }
				ROOT = { add_trait = prev }
			}
			every_character_trait ={
				limit = { has_trait_flag = female_character_bloodline }
				ROOT = { add_trait = prev }
			}
		}

	}
}


dynasty_bloodline_actions={
	trigger = { 
		any_parent ={
			dynasty?= ROOT.dynasty
			any_character_trait = { has_trait_flag = dynasty_bloodline }
		}
	}

	effect = {  
		every_parent ={
			limit = { dynasty?= ROOT.dynasty }
			every_character_trait ={
				limit = { has_trait_flag = dynasty_bloodline }
				ROOT = { add_trait = prev }
			}
		}
	}
}





